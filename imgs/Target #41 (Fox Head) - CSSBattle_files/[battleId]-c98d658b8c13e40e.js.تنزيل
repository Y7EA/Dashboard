(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[789],{9249:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/battle/[battleId]",function(){return a(8391)}])},7418:function(e,t,a){"use strict";a.d(t,{E:function(){return f}});var n=a(2322),r=a(2784),s=a(9097),i=a.n(s),l=a(1453),c=a(2367),o=function(e){var t=e.imageUrl,a=e.actionLink,r=e.timeStamp,s=e.children,i=(0,n.jsx)("svg",{style:{width:"30px",height:"30px"},viewBox:"0 0 24 24",children:(0,n.jsx)("path",{fill:"currentColor",d:"M12 19.2c-2.5 0-4.71-1.28-6-3.2.03-2 4-3.1 6-3.1s5.97 1.1 6 3.1a7.232 7.232 0 0 1-6 3.2M12 5a3 3 0 0 1 3 3 3 3 0 0 1-3 3 3 3 0 0 1-3-3 3 3 0 0 1 3-3m0-3A10 10 0 0 0 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10c0-5.53-4.5-10-10-10z"})});return(0,n.jsxs)("div",{className:"notification-item",children:[(0,n.jsxs)("div",{className:"notification-item__content",children:[(0,n.jsx)("div",{className:"notification-item__image",children:t?(0,n.jsx)("img",{src:t,alt:""}):i}),(0,n.jsxs)("div",{className:"notification-item__text",children:[s,(0,n.jsxs)("div",{className:"notification-item__time",children:[(0,c.VG)(r)," ago"]})]})]}),a?(0,n.jsx)("a",{href:a,className:"shadow-link"}):null]})},d=a(7037),u=a(4136),h=a.n(u),m=a(9241);function f(e){var t=e.battleId,a=(0,r.useState)(!1),s=a[0],c=a[1],u=(0,r.useState)([]),f=u[0],p=u[1];return(0,r.useEffect)((function(){c(!0),(0,d.V6)(t).then((function(e){c(!1),p(e)}))}),[t]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.M,{children:"Activity Timeline"}),(0,n.jsx)("div",{className:"item__content item__content--no-padding",children:(0,n.jsxs)("div",{className:h().streams,children:[s?(0,n.jsx)("p",{className:"para ta-c",style:{margin:"1rem 0"},children:(0,n.jsx)(m.a,{})}):null,s||f.length?null:(0,n.jsx)("p",{className:"para ta-c",children:"No activity recorded here."}),!s&&f.map((function(e){return(0,n.jsxs)(o,{timeStamp:e.timestamp,imageUrl:e.playerProfile.avatar,children:[e.playerProfile.displayName," ",e.data.userId===e.data.previousUserId?"broke own record on":"set a new record on"," ",(0,n.jsx)(i(),{href:"/play/".concat(e.data.levelId),children:(0,n.jsxs)("a",{className:"link",children:["Target #",e.data.levelId]})})," ","with ",e.data.codeSize," chars (",e.data.codeSize-e.data.previousUserCodeSize,")."]},e.id)}))]})})]})}},2220:function(e,t,a){"use strict";a.d(t,{z:function(){return c}});var n=a(865),r=a(6670),s=a(6297),i=a(2322),l=(a(2784),a(9241));function c(e){var t=e.type,a=void 0===t?"button":t,c=e.primary,o=e.danger,d=e.success,u=e.cool,h=e.size,m=e.extraClasses,f=void 0===m?"":m,p=e.children,g=e.isLoading,x=(0,s.Z)(e,["type","primary","danger","success","cool","size","extraClasses","children","isLoading"]);return(0,i.jsxs)("button",(0,r.Z)((0,n.Z)({type:a,className:"button ".concat(c?"button--primary":""," \n      ").concat(u?"button--cssbattle":"","\n      ").concat(h?"button--".concat(h):"","\n      ").concat(d?"button--success":""," ").concat(o?"button--danger":""," ").concat(f),disabled:g},x),{children:[p,(0,i.jsx)("div",{style:{display:"flex",transition:"max-width 0.3s ease",overflow:"hidden",maxWidth:g?"1.6em":0},children:(0,i.jsx)(l.a,{height:"1.3em",leftMargin:"0.5rem"})})]}))}},1551:function(e,t,a){"use strict";a.d(t,{W:function(){return c}});var n=a(2322),r=a(2784),s=a(2367),i=a(1251);function l(e){var t=e.count,a=e.label;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{className:"countdown__number",children:t}),a,1===t?"":"s"]})}function c(e){var t=e.date,a=e.prefix,c=void 0===a?"":a,o=e.suffix,d=void 0===o?"remaining":o,u=e.separator,h=void 0===u?" : ":u,m=e.hideSeconds,f=void 0!==m&&m,p=e.onFinish,g=function(){var e=Date.now();if(e>new Date(t))return clearInterval(_.current),void("function"===typeof p&&p());var a=(0,s.hM)(e,t);v(a)},x=(0,r.useState)({}),j=x[0],v=x[1],_=(0,r.useRef)();return(0,r.useEffect)((function(){g();var e=_.current=setInterval(g,1e3);return function(){clearInterval(e)}}),[t]),(0,n.jsxs)("div",{className:"countdown",children:[(0,n.jsx)(i.dy,{label:"watch",children:"\u23f0"})," ",c?" ".concat(c," "):null,j.days?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l,{label:"day",count:j.days}),h]}):null," ",j.hours?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l,{label:"hour",count:j.hours}),h]}):null," ",j.minutes?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l,{label:"minute",count:j.minutes}),f?"":h]}):null," ",f?null:(0,n.jsx)(l,{label:"second",count:j.seconds}),d?" ".concat(d):null]})}},1942:function(e,t,a){"use strict";a.d(t,{N:function(){return r}});var n=a(2322);function r(){return(0,n.jsxs)("div",{className:"friends-empty",children:[(0,n.jsx)("img",{alt:"Two friends high fiving",src:"/images/friends.svg"}),(0,n.jsx)("p",{className:"friends-empty__title",children:"Add friends!"}),(0,n.jsx)("p",{className:"friends-empty__desc",children:"Want to see where you stand only among your friends? Visit their profile and add them as friends to see them here!"})]})}},8742:function(e,t,a){"use strict";a.d(t,{P:function(){return i}});var n=a(2322),r=(a(2784),a(2367)),s=a(1251);function i(e){var t=e.data;return(0,n.jsxs)("div",{className:"leaderboard__user  leaderboard__user--".concat(t.rank),children:[(0,n.jsx)(s.qE,{small:!0,size:"32",url:t.playerProfile.avatar,username:t.playerProfile.username,userId:t.userId||t.playerProfile.id||t.playerProfile.uid,className:"leaderboard__user-avatar"}),(0,n.jsxs)("div",{className:"leaderboard__user-info",children:[(0,n.jsx)(s.Rj,{name:t.playerProfile.displayName,username:t.playerProfile.username,isPro:t.playerProfile.isPro,userId:t.userId||t.playerProfile.id||t.playerProfile.uid,className:"leaderboard__user-name",ellipsis:!0}),(0,n.jsxs)("p",{className:"leaderboard__user-score",children:[t.score?t.score.toFixed(2):"0"," ",t.playedCount?"(".concat(t.playedCount," Target").concat(t.playedCount>1?"s":"",")"):"",t.codeSize?"(".concat(t.codeSize," Chars)"):""]})]}),(0,n.jsx)("p",{className:"leaderboard__user-rank  leaderboard__user-rank--".concat(t.rank),children:(0,r.x4)(t.rank)})]})}},94:function(e,t,a){"use strict";a.d(t,{g:function(){return s}});var n=a(2322),r=a(3290);function s(e){var t=e.isFriendsMode,a=e.onChange,s=function(e){a(e),(0,r.q)({name:"friendLeaderboardToggle",label:"friends"===e.target.value})};return(0,n.jsxs)("div",{className:"filter leaderboard-filter",children:[(0,n.jsxs)("span",{className:"filter__button",children:[(0,n.jsx)("input",{type:"radio",name:"leaderboard-filter",id:"friends",value:"friends",defaultChecked:t,onChange:s}),(0,n.jsx)("label",{htmlFor:"friends",children:"Friends Only"})]}),(0,n.jsxs)("span",{className:"filter__button",children:[(0,n.jsx)("input",{type:"radio",name:"leaderboard-filter",id:"everyone",value:"everyone",defaultChecked:!t,onChange:s}),(0,n.jsx)("label",{htmlFor:"everyone",children:"All Players"})]})]})}},1453:function(e,t,a){"use strict";a.d(t,{M:function(){return r}});var n=a(2322);a(2784);function r(e){var t=e.children,a=e.sticky,r=e.keyCombo,s=e.meta;return(0,n.jsxs)("div",{className:"item__header  ".concat(a?"item__header--sticky":""),children:[(0,n.jsx)("h3",{className:"header__title",children:t}),r&&(0,n.jsxs)("p",{className:"key-combo key-combo--header",children:[" ",r," "]}),(0,n.jsx)("div",{className:"header__extra-info",children:s})]})}},9318:function(e,t,a){"use strict";a.d(t,{_:function(){return s}});var n=a(2838),r=a(2784);function s(e,t){var a=(0,r.useState)((function(){try{var a=window.localStorage.getItem(e);return a?JSON.parse(a):t}catch(n){return console.log(n),t}})),s=a[0],i=a[1];return[s,function(t){try{var a=(0,n.Z)(t,Function)?t(s):t;i(a),window.localStorage.setItem(e,JSON.stringify(a))}catch(r){console.log(r)}}]}},8391:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return Y}});var n=a(2322),r=a(2784),s=a(5632),i=a(7729),l=a.n(i),c=a(7500),o=a(4697),d=a(7171),u=a(865),h=a(6670),m=a(6383),f=a(930),p=a(1453),g=a(7037),x=a(8742),j=a(3552),v=a(9241),_=a(9318),b=a(94),y=a(1942),N=a(9097),w=a.n(N),S=function(e){var t=e.title,a=e.battleId,s=e.numOfPlayersToShow,i=void 0===s?10:s,l=(0,r.useContext)(j.S),o=(0,r.useState)([]),d=o[0],N=o[1],S=(0,r.useState)({}),k=S[0],I=S[1],B=(0,r.useState)(),C=B[0],P=B[1],F=(0,m.Z)((0,_._)("showFriendsLeaderboard",!!l),2),T=F[0],E=F[1],O=(0,c.checkIfCustomBattle)({id:a}),D=(0,r.useState)({battlePlayerCount:{}}),H=D[0],L=D[1];return(0,r.useEffect)((function(){(0,g.pc)().then(L)}),[]),(0,r.useEffect)((function(){P(!0),N([]),I({}),(T&&l?(0,g.eL)({battleId:a,userId:l.uid}):(0,g.uL)({battleId:a,numberOfPlayers:i})).then((function(e){N(e),P(!1),l&&e.length&&(e.find((function(e){return e.id===l.uid}))?I({rank:e.findIndex((function(e){return e.id===l.uid}))+1}):(0,g.r8)({userId:l.uid,battleId:a}).then((function(t){I(t),N((0,f.Z)(e).concat([{score:t.score,playerProfile:(0,h.Z)((0,u.Z)({},l),{avatar:l.photoURL}),id:l.uid,rank:t.rank,playedCount:t.playedCount}]))})).catch((function(e){console.log("failed to fetch rank")})))}))}),[l?l.uid:"",a,T]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(p.M,{meta:"You: ".concat(k.rank||"-","/").concat(T?d.length:H.battlePlayerCount[a]||"-"),children:t}),(0,n.jsxs)("div",{className:"item__content",children:[l&&(0,n.jsx)(b.g,{isFriendsMode:T,onChange:function(e){E("friends"===e.target.value)}}),T&&!C&&!d.length&&(0,n.jsx)(y.N,{}),0===k.rank&&(0,n.jsx)("p",{className:"section-helper section-helper--no-score",children:"Play at least 1 target to see your rank."}),(0,n.jsxs)("div",{className:"leaderboard-container",children:[C?(0,n.jsx)("p",{className:"ta-c",children:(0,n.jsx)(v.a,{})}):null,!C&&!d.length&&!T&&(0,n.jsx)("p",{className:"para",children:"No one here. It could be you! How about playing some targets?"}),(0,n.jsx)("ol",{className:"leaderboard__user-list",children:d.map((function(e,t){return(0,n.jsx)("li",{children:(0,n.jsx)(x.P,{data:(0,h.Z)((0,u.Z)({},e),{rank:void 0===e.rank?t+1:e.rank})},t)},t)}))})]}),d.length?(0,n.jsxs)("p",{className:"para leaderboard-buttons",children:[(0,n.jsx)(w(),{href:"/leaderboard/battle/".concat(a),children:(0,n.jsx)("a",{className:"button",children:"See top 100"})}),!O&&(0,n.jsx)(w(),{href:"/leaderboard",children:(0,n.jsx)("a",{className:"button",style:{marginLeft:"1rem"},children:"All-time leaderboard"})})]}):null]})]})},k=a(1251),I=a(1551);function B(e){var t,a=e.data,s=e.playerData,i=void 0===s?{}:s,l=e.stats,c=e.unlockDate,o=(0,r.useContext)(j.S),d=(0,r.useState)(!a.id),u=d[0],h=d[1];a.image=u?a.isOpen?"/targets/0-open.png":"/targets/0.png?v=2":a.image;var m=null===(t=a.image)||void 0===t?void 0:t.replace(/\.png/,"@2x.png");return(0,r.useEffect)((function(){h(!a.id)}),[a.id]),(0,n.jsxs)("div",{className:"target-tile ".concat(a.id?"":"target-tile--dummy"," ").concat(a.isOpen?"target-tile--public":""),children:[a.id&&(0,n.jsx)(w(),{href:"/play/".concat(a.id),children:(0,n.jsx)("a",{className:"shadow-link",title:"Play target number ".concat(a.id)})}),(0,n.jsx)("img",{src:a.image,srcSet:"".concat(m," 2x"),alt:"",loading:"lazy",className:"target-tile__image"}),(0,n.jsxs)("div",{className:"target-tile__info",children:[(0,n.jsxs)("div",{className:"target-top-info",children:[a.id?(0,n.jsx)("p",{className:"target-top-info__pill",children:a.id.length>5&&a.name||"#".concat(a.id)}):null,a.isOpen?(0,n.jsx)("p",{className:"target-top-info__pill",children:(0,n.jsx)("img",{alt:"",src:"/images/open-book.svg"})}):null]}),(0,n.jsxs)("div",{className:"target-highscore",children:[l?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"target-highscore__right",children:[(0,n.jsx)("div",{className:"target-highscore__username",children:(0,n.jsx)(k.Rj,{name:l.highscore.playerProfile.displayName,username:l.highscore.playerProfile.username,userId:l.highscore.playerProfile.userId,isPro:l.highscore.playerProfile.isPro,ellipsis:!0})}),(0,n.jsxs)("p",{className:"target-highscore__score",children:[l.highscore.score," ",(0,n.jsxs)("span",{children:["{",l.highscore.codeSize,"}"]})]})]}),(0,n.jsx)(k.qE,{small:!0,size:"40",url:l.highscore.playerProfile.avatar,userId:l.highscore.playerProfile.userId,username:l.highscore.playerProfile.username,className:"target-highscore__avatar"})]}):null,l||u?null:"No highscore available",u&&c?(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:"target-highscore__right",children:[(0,n.jsx)("div",{className:"target-highscore__username",children:"Unlocks in:"}),(0,n.jsx)("div",{className:"target-highscore__score",children:(0,n.jsx)(I.W,{date:c,suffix:"",prefix:""})})]})}):null]}),o&&!u&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:"target-tile-header",children:"Your Stats"}),(0,n.jsx)("div",{className:"target-attempts",children:(0,n.jsxs)("p",{className:"target-attempts__item target-attempts__item--score",children:["Score:",(0,n.jsxs)("span",{children:[i.score||"N/A"," ",(0,n.jsxs)("span",{children:["{",i.codeSize||"-","}"]})]})]})})]})]}),a.isOpen?(0,n.jsx)("div",{className:"public-target-message",children:(0,n.jsxs)("p",{children:['This is an "Open" Target. Open Targets have all the top solutions public.'," ",(0,n.jsx)("a",{className:"link",href:"/blog/introducing-open-targets/",children:"Learn More"})]})}):null]})}function C(e){var t=(0,r.useState)(),a=t[0],s=t[1],i=(0,r.useState)(),l=i[0],c=i[1];return(0,r.useEffect)((function(){if(s(),c(),e.data.id){var t=e.data.id;return(0,g.GT)(e.data.id).then((function(a){t===e.data.id&&s(a)})),function(){t=null}}}),[e.data.id]),(0,r.useEffect)((function(){var t=Math.floor(e.index/2),a=new Date(e.battleStartDate);a.setDate(a.getDate()+7*t),c(a)}),[e.data.id]),(0,n.jsx)(B,(0,h.Z)((0,u.Z)({},e),{stats:a,unlockDate:l}))}var P="all",F="played",T="notPlayed";function E(e){var t=e.battle,a=function(e){y(e.target.value)},s=(0,r.useContext)(j.S),i=(0,r.useState)([]),l=i[0],c=i[1],o=(0,r.useState)(),d=o[0],m=o[1],f=(0,r.useState)(0),x=f[0],v=f[1],_=(0,r.useState)(P),b=_[0],y=_[1];return(0,r.useEffect)((function(){(0,g.TU)(t.levelIds).then(c)}),[t.id]),(0,r.useEffect)((function(){v(0),m(),s&&(0,g.HC)({userId:s.uid,levelIds:t.levelIds}).then((function(e){v(Object.keys(e).length),m(e)}))}),[s?s.uid:"",t.id]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.M,{sticky:!0,meta:s?(0,n.jsx)("div",{children:(0,n.jsxs)("span",{className:"filter",children:[(0,n.jsxs)("span",{className:"filter__button",children:[(0,n.jsx)("input",{defaultChecked:!0,type:"radio",name:"filter",id:"all",value:P,onChange:a}),(0,n.jsxs)("label",{htmlFor:"all",children:["All (","".concat(t.levelIds.length),")"]})]}),(0,n.jsxs)("span",{className:"filter__button",children:[(0,n.jsx)("input",{type:"radio",name:"filter",id:"played",value:F,onChange:a}),(0,n.jsxs)("label",{htmlFor:"played",children:["Played (","".concat(x),")"]})]}),(0,n.jsxs)("span",{className:"filter__button",children:[(0,n.jsx)("input",{type:"radio",name:"filter",id:"notPlayed",value:T,onChange:a}),(0,n.jsxs)("label",{htmlFor:"notPlayed",children:["Not yet played (","".concat(l.length-x),")"]})]})]})}):null,children:["Battle ",(0,n.jsx)(k.bN,{id:t.id})," - ",t.name]}),(0,n.jsx)("div",{className:"item__content",children:(0,n.jsx)("div",{className:"targets-container",children:l.map((function(e,a){return b===P||b===F&&d[e.id]||b===T&&!d[e.id]?(0,n.jsx)(C,{data:(0,h.Z)((0,u.Z)({},e),{id:e.id,isOpen:!(!t.openLevelIds||!t.openLevelIds.includes(e.id||t.firstLevelId+a))}),playerData:d?d[e.id]:void 0,index:a,totalLevels:l.length,battleStartDate:t.startDate},a):null}))})})]})}var O=a(8788),D=a(4776),H=a.n(D),L=a(3029),z=a(1893),M=a(3290),Z=a(2220),G=a(2367);function A(e){return e.endDate||+new Date(1e3*e.startDate.seconds)+60*e.duration*1e3}function U(e){var t=e.battle,a=function(){return l&&(!l.settings||!l.settings.emailNotifications)&&!1!==u},i=function(){j((0,c.getBattleStatus)(t))},l=(0,z.a)(),o=(0,s.useRouter)(),d=(0,r.useState)(),u=d[0],h=d[1],m=(0,c.checkIfCustomBattle)(t),f=(0,r.useState)((0,c.getBattleStatus)(t)),x=f[0],j=f[1],v=(0,r.useState)(!1),_=v[0],b=v[1];function y(e){return N.apply(this,arguments)}function N(){return(N=(0,O.Z)(H().mark((function e(a){var n;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=6;break}return e.next=3,l.getIdToken();case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0="";case 7:if(n=e.t0){e.next=10;break}return e.abrupt("return");case 10:return b(!0),e.abrupt("return",fetch("".concat(g.bl,"/").concat(a===c.BattleStatuses.ONGOING?"startBattle":"stopBattle","?token=").concat(n,"&battleId=").concat(t.id)).then((function(e){return b(!1),e})));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function w(){return w=(0,O.Z)(H().mark((function e(){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l){e.next=2;break}return e.abrupt("return");case 2:if(t.levelIds.length){e.next=4;break}return e.abrupt("return",window.alert("You have not added any targets yet. Add at least 1 target to before starting the battle."));case 4:if(window.confirm("You cannot edit or restart a battle once it is started. Are you sure you want to start this battle?")){e.next=7;break}return e.abrupt("return");case 7:y(c.BattleStatuses.ONGOING).then(function(){var e=(0,O.Z)(H().mark((function e(t){var a;return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=4;break}return(0,G.lC)(3),j(c.BattleStatuses.ONGOING),e.abrupt("return");case 4:return e.next=6,t.json();case 6:if("insufficientCredits"!==(a=e.sent).error){e.next=13;break}return window.confirm("You have insufficient credits to start this custom battle. Click OK to proceed to buying credits.")&&o.push("/settings?tab=custom-battle-credits"),e.abrupt("return");case 13:if("noTargetsFound"!==a.error){e.next=16;break}return window.alert("You have not added any targets yet. Add at least 1 target to before starting the battle."),e.abrupt("return");case 16:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){b(!1),alert("Battle could not be started. Try one more time, otherwise DM us on twitter: @css_battle")}));case 8:case"end":return e.stop()}}),e)}))),w.apply(this,arguments)}return r.useEffect((function(){j((0,c.getBattleStatus)(t))}),[t]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(p.M,{children:[t.type?t.type===c.BattleTypes.BIG_BATTLE?"Big":"Mini":"Custom"," ","Battle"]}),(0,n.jsxs)("div",{className:"homepage-banner",children:[(0,n.jsxs)("div",{className:"d-if",style:{alignItems:"center",marginBottom:"0.25rem"},children:[(0,n.jsxs)("h1",{className:"homepage-banner__heading",style:{marginBottom:"0",marginRight:"1rem"},children:["Battle ",(0,n.jsx)(k.bN,{id:t.id})," - ",t.name]}),(0,n.jsx)(L.k,{status:x})]}),(0,n.jsxs)("div",{className:"homepage-banner__description battle-banner__description",children:[t.description?(0,n.jsxs)("p",{className:"para",children:[t.description," ",t.sponsor?(0,n.jsxs)(n.Fragment,{children:["Sponsored by"," ",(0,n.jsx)("a",{className:"link",href:t.sponsor.link,children:t.sponsor.name}),".",t.rewards?" The following rewards will be given to players at the end of the Battle.":null]}):null]}):null,t.rewards?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"battle-rewards",children:[t.rewards.gold?(0,n.jsx)("div",{className:"reward-tile reward-tile--gold",children:t.rewards.gold}):null,t.rewards.silver?(0,n.jsx)("div",{className:"reward-tile reward-tile--silver",children:t.rewards.silver}):null,t.rewards.bronze?(0,n.jsx)("div",{className:"reward-tile reward-tile--bronze",children:t.rewards.bronze}):null,t.rewards.others?(0,n.jsx)("div",{className:"reward-tile reward-tile--regular",children:t.rewards.others}):null]}),(0,n.jsx)("p",{style:{fontSize:"12px",marginTop:"-30px"},children:t.rewards.note})]}):null]}),x===c.BattleStatuses.UPCOMING&&t.startDate?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(k.xu,{style:{padding:"0.6rem 1.5rem"},children:(0,n.jsx)(I.W,{date:t.startDate,onFinish:i})}),(0,n.jsxs)("p",{className:"para",children:["Starting on ",new Date(t.startDate).toLocaleString()]})]}):null,x===c.BattleStatuses.FINISHED&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{className:"para",style:{marginLeft:"2rem",marginRight:"2rem"},children:m?"This Battle has finished. But you can always play the targets below. Note: Custom battle targets don't  contribute to your global ranking.":"This Battle has finished. But you can always play the targets below and improve your global ranking!"}),a()&&(0,n.jsx)(Z.z,{primary:!0,onClick:function(){h(!0),(0,M.q)({name:"emailNotificationUpdated",label:1}),(0,g.Ii)(l.uid,{"settings.emailNotifications":!0}).then((function(){h(!1)}))},isLoading:u,children:"Get Notified via Email about new Battles"}),!1===u?(0,n.jsx)("p",{className:"para",children:"Great! We'll notify you about coming Battles."}):null,a()&&(0,n.jsx)("p",{className:"small",style:{margin:"2rem 2rem 0",color:"var(--clr-text-light)"},children:"With this, you'll also receive future emails from us regarding such announcements. We won't spam you :)"})]}),x===c.BattleStatuses.ONGOING&&t.startDate?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("p",{className:"para",children:["Battle ends on ",new Date(A(t)).toLocaleString()]}),(0,n.jsx)(k.xu,{style:{padding:"0.6rem 1.5rem"},children:(0,n.jsx)(I.W,{date:A(t),onFinish:i})})]}):null,!l&&(0,n.jsx)("p",{children:(0,n.jsx)("a",{className:"button",href:"/login",children:"Sign In / Sign Up"})}),l&&l.uid===t.createdBy?(0,n.jsxs)(k.hE,{center:!0,children:[x===c.BattleStatuses.UPCOMING?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Z.z,{primary:!0,onClick:function(){return w.apply(this,arguments)},isLoading:_,children:"Start Battle"}),(0,n.jsx)("a",{className:"link",href:"/battle/create/".concat(t.id),children:"Edit"})]}):null,x===c.BattleStatuses.ONGOING?(0,n.jsx)(Z.z,{danger:!0,onClick:function(){window.confirm("You cannot restart a battle once it is stopped. Are you sure you want to stop this battle?")&&y(c.BattleStatuses.FINISHED).then(function(){var e=(0,O.Z)(H().mark((function e(t){return H().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(200!==t.status){e.next=3;break}return j(c.BattleStatuses.FINISHED),e.abrupt("return");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){b(!1),alert("Battle could not be stopped. Try one more time, otherwise DM us on twitter: @css_battle")}))},isLoading:_,children:"Stop Battle"}):null]}):null]})]})}var R=a(7418),W=a(3781),q=a.n(W),Y=function(){var e=(0,s.useRouter)(),t=(0,r.useContext)(j.S),a=(0,r.useState)(!1),i=(a[0],a[1]),u=(0,r.useState)(),h=u[0],m=u[1];(0,r.useEffect)((function(){if(e.isReady){var t=e.query.battleId,a=(0,G.NR)(t);i(a),m(a?t:parseInt(t,10))}}),[e.isReady,e.query.battleId]);var f=(0,r.useState)(),p=f[0],x=f[1];return(0,r.useEffect)((function(){h&&(0,g.ch)(h).then((function(e){(0,c.getBattleStatus)(e)!==c.BattleStatuses.UPCOMING||t&&e.createdBy===t.uid||(e.levelIds=e.levelIds.map((function(){return 0}))),x(e)}))}),[h]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l(),{children:p?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("meta",{property:"og:title",content:"Battle #".concat(p.id,": ").concat(p.name," - CSSBattle")},"ogTitle"),(0,n.jsx)("title",{children:"Battle #".concat(p.id,": ").concat(p.name," - CSSBattle")},"title")]}):null}),(0,n.jsx)(o.h,{battleId:h,battleName:p?p.name:""}),p?(0,n.jsxs)("div",{className:"container",children:[(0,n.jsxs)("div",{className:"container__item container__item--main container__item--targets",children:[(0,n.jsx)(U,{battle:p}),(0,n.jsx)(E,{battle:p})]}),(0,n.jsx)("div",{className:"container__item container__item--aside container__item--sticky",children:p?(0,n.jsxs)("div",{className:q().halfAndHalf,children:[(0,n.jsx)("div",{children:(0,n.jsx)(S,{title:"Battle Leaderboard",battleId:p.id})}),(0,n.jsx)("div",{children:(0,n.jsx)(R.E,{battleId:p.id})})]}):null})]}):(0,n.jsx)("div",{className:"container",children:(0,n.jsx)("div",{className:"container__item container__item--main",children:(0,n.jsx)(v.R,{children:"Fetching battle details..."})})}),(0,n.jsx)(d.$,{})]})}},4136:function(){},3781:function(e){e.exports={halfAndHalf:"Homepage_halfAndHalf__aOimb",homepageTileContainer:"Homepage_homepageTileContainer__kHUUH",homeTile:"Homepage_homeTile__wGEl5",customBattle:"Homepage_customBattle__3KfvQ",customBattleHighlighted:"Homepage_customBattleHighlighted__q5lok",customBattle_name:"Homepage_customBattle_name__2rMne",liveCounterTile:"Homepage_liveCounterTile__pcCjZ",liveCounter:"Homepage_liveCounter__0oZ7g",liveCounterEmoji:"Homepage_liveCounterEmoji__xMfRJ",learnTile:"Homepage_learnTile__SJjw7"}}},function(e){e.O(0,[154,836,774,888,179],(function(){return t=9249,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
//# sourceMappingURL=[battleId]-c98d658b8c13e40e.js.map